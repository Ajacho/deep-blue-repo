@model IEnumerable<Uxcheckmate_Main.Models.Report>

<h1 class="text-center">UXCheckmate Analysis Reports</h1>

<input type="hidden" id="analyzed-url" value="@ViewBag.AnalyzedUrl" />

<div id="results-container">
    @if (!Model.Any() || Model.All(r => !r.DesignIssues.Any()))
    {
        <div class="alert alert-success"><strong>Congrats! No design issues detected. Your site is in great shape!</strong></div>
    }
    else
    {
        <h3>Design Issues</h3>
        <p>Total Reports: @Model.Count()</p>

        @foreach (var report in Model)
        {
            <h4>Report for: <a href="@report.Url" target="_blank">@report.Url</a></h4>
            <p>Scanned on: @report.Date</p>

            @if (!report.DesignIssues.Any())
            {
                <div class="alert alert-info">No design issues found for this report.</div>
            }
            else
            {
                <table class="table table-striped table-bordered">
                    <thead class="thead-dark">
                        <tr>
                            <th>Category</th>
                            <th>Message</th>
                            <th>Severity</th>
                        </tr>
                    </thead>
                    <tbody>
                    @foreach (var issue in report.DesignIssues)
                    {
                        <tr>
                            <td>@(issue.Category != null ? issue.Category.Name : "Uncategorized")</td>
                            <td>@issue.Message</td>
                            <td>@issue.Severity</td>
                        </tr>
                    }
                    </tbody>
                </table>
            }
        }
    }
</div>
@*
@section Scripts {
    <script src="~/js/reportResults.js"></script>
}


        <h3>Accessibility Issues</h3>
        <p>Total Issues: @Model.Item2.Count()</p>
        <table class="table table-striped table-bordered">
            <thead class="thead-dark">
                <tr>
                    <th>Code</th>
                    <th>Message</th>
                    <th>Selector</th>
                </tr>
            </thead>
            <tbody>
            @foreach (var issue in Model.Item2)
            {
                <tr>
                    <td>@issue.Code</td>
                    <td>@issue.Message</td>
                    <td>@issue.Selector</td>
                </tr>
            }
            </tbody>
        </table>
    }
</div>*@

@section Scripts {
    <script src="~/js/reportResults.js"></script>
}